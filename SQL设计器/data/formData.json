[
  {
    "appId": "",
    "attributes": [
      {
        "businessKey": false,
        "code": "id",
        "controlType": null,
        "createdBy": "admin",
        "creationDate": "2018-07-10 00:00:00",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "STRING",
        "defaultValue": null,
        "description": "ID",
        "expression": "",
        "formEdit": false,
        "hidden": false,
        "id": "4028a5816482db4b016482e442a10003",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": 36,
        "mappingField": "ID",
        "name": "ID",
        "nullAble": false,
        "objId": "student",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": true,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [
          {
            "attributeId": "4028a5816482db4b016482e442a10003",
            "createdBy": "cdc",
            "creationDate": "2018-11-02 16:59:56",
            "description": "",
            "entityId": "4028a5816482db4b016482e4429b0002",
            "expression": "",
            "id": "71977f62cde24efd90111951c55d99a7",
            "lastUpdateDate": "2018-11-02 16:59:56",
            "lastUpdatedBy": "cdc",
            "objId": "student",
            "order": 0,
            "status": "",
            "type": "NOTNULL"
          }
        ],
        "precisionDisabled": true,
        "lengthDisabled": false,
        "nullAbleDisabled": true
      },
      {
        "businessKey": false,
        "code": "name",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-07-10 00:00:00",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "名称",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a5816482db4b016482e442a10004",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": 50,
        "mappingField": "NAME",
        "name": "名称",
        "nullAble": false,
        "objId": "student",
        "operator": "LIKE",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": true,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "CREATE_OPERATOR",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "age",
        "controlType": "NUMBER",
        "createdBy": "admin",
        "creationDate": "2018-07-10 00:00:00",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "INTEGER",
        "defaultValue": null,
        "description": "年龄",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a5816482db4b016482e442a10005",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": 3,
        "mappingField": "AGE",
        "name": "年龄",
        "nullAble": false,
        "objId": "student",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "birthday",
        "controlType": "DATE",
        "createdBy": "admin",
        "creationDate": "2018-07-10 00:00:00",
        "dataFormat": "yyyy-MM-dd",
        "dataSource": null,
        "dataType": "DATE",
        "defaultValue": "newdate",
        "description": "生日",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a5816482db4b016482e442a20006",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": null,
        "mappingField": "BIRTHDAY",
        "name": "生日",
        "nullAble": true,
        "objId": "student",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": true,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": true
      },
      {
        "businessKey": false,
        "code": "height",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-07-10 00:00:00",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "DOUBLE",
        "defaultValue": null,
        "description": "身高",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a5816482db4b016482e442a20007",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": 5,
        "mappingField": "HEIGHT",
        "name": "身高",
        "nullAble": true,
        "objId": "student",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": 2,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": false,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "remark",
        "controlType": "TEXTAREA",
        "createdBy": "admin",
        "creationDate": "2018-07-10 00:00:00",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "STRING",
        "defaultValue": null,
        "description": "备注",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a5816482db4b016482e442a20008",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": 2000,
        "mappingField": "REMARK",
        "name": "备注",
        "nullAble": true,
        "objId": "student",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "city",
        "controlType": "COMBO",
        "createdBy": "admin",
        "creationDate": "2018-07-13 11:48:14",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "城市",
        "expression": "00058",
        "formEdit": false,
        "hidden": true,
        "id": "4028a58164919f85016491c0e1f60001",
        "lastUpdateDate": "2018-11-02 16:59:56",
        "lastUpdatedBy": "cdc",
        "length": 36,
        "mappingField": "CITY",
        "name": "城市",
        "nullAble": true,
        "objId": "student",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": true,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      }
    ],
    "businessKey": "",
    "code": "student",
    "createdBy": "admin",
    "creationDate": "2018-07-10 00:00:00",
    "deploy": false,
    "description": "学生(勿删)",
    "editFormSource": null,
    "editHtmlSource": null,
    "formSource": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <script type=\"text/javascript\">\r\n    var resourceList = '${userSessionResourceList!}';\r\n    var entityObject = {\r\n        entityId : '4028a5816482db4b016482e4429b0002',\r\n        entityObjId : 'student',\r\n        entitySubObjId : '',\r\n    }\r\n</script>\r\n<link href=\"${applicationContext}/static/iconfont/17.7.4/iconfont.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/1.0/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/skin1.css\" rel=\"stylesheet\">\r\n<script src=\"${applicationContext}/static/jQuery/1.11.3/jquery.min.js\"></script>\r\n<script src=\"${applicationContext}/static/easyUI/1.5.2/jquery.easyui.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/popper.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/dataTable.js\"></script>\r\n<script src=\"${applicationContext}/static/vue/2.3.0/index.js\"></script>\r\n<script src=\"${applicationContext}/static/vue-resource/1.3.3/vue-resource.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/index.js?v=1.1\"></script>\r\n<script src=\"${applicationContext}/static/scui/1.0/scui.min.js?v=step1\"></script>\r\n<script src=\"${applicationContext}/static/util/gobal.js\"></script>\r\n<script src=\"${applicationContext}/static/util/dataTranslate.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/filters.js\"></script>\r\n<script src=\"${applicationContext}/static/util/accessControl.js\"></script>\r\n<script src=\"${applicationContext}/jslib/util/curd.js\"></script>  <style>\r\n    body {\r\n      background-color: transparent;\r\n    }\r\n  </style>\r\n</head>\r\n<title>学生-form</title>\r\n<body>\r\n<div id=\"app\" class=\"sc-theme is-standard sc-box-content-app\">\r\n  <div>\r\n    <el-dialog :title=\"dialogTitle\" v-model=\"dialogFormVisible\" @close=\"onCancel\" :close-on-click-modal=\"false\"\r\n               size=\"small\">\r\n      <div class=\"dialog_content\">\r\n        <el-form :model=\"formData\" ref=\"formData\">\r\n          <sc-form-layout label-width=\"small\">\r\n                <sc-form-layout-row>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"名称\" prop=\"name\"  :rules=\"[{ required: true, message: '名称不能为空'}]\" >\r\n                        <el-input :disabled=\"state.name\" v-model=\"formData.name\"></el-input>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"年龄\" prop=\"age\"  :rules=\"[{ required: true, message: '年龄不能为空'}]\" >\r\n                        <el-input type=\"number\" :disabled=\"state.age\" v-model=\"formData.age\"></el-input>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                </sc-form-layout-row>\r\n                <sc-form-layout-row>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"生日\" prop=\"birthday\"  >\r\n                        <el-date-picker :disabled=\"state.birthday\" v-model=\"formData.birthday\" @change=\"onDateChange($event,formData,'birthday')\"\r\n                                        type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"身高\" prop=\"height\"  >\r\n                        <el-input :disabled=\"state.height\" v-model=\"formData.height\"></el-input>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                </sc-form-layout-row>\r\n                <sc-form-layout-row>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"备注\" prop=\"remark\"  >\r\n                        <el-input type=\"textarea\" :disabled=\"state.remark\" v-model=\"formData.remark\"></el-input>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"城市\" prop=\"city\"  >\r\n                        <el-select clearable filterable v-model=\"formData.city\" :disabled=\"state.city\" placeholder=\"请选择\">\r\n                            <el-option\r\n                                    v-for=\"item in selectData.cityOption\"\r\n                                    :key=\"item.ddKey\"\r\n                                    :label=\"item.ddName\"\r\n                                    :value=\"item.ddKey\">\r\n                            </el-option>\r\n                        </el-select>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                </sc-form-layout-row>\r\n          </sc-form-layout>\r\n        </el-form>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" v-if=\"actions.save.visible\" @click=\"onSubmit('formData')\" v-cloak>\r\n          {{actions.save.text}}\r\n        </el-button>\r\n        <el-button @click=\"onCancel\" v-cloak>{{actions.cancel.text}}</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n\r\n</div>\r\n</body>\r\n<script>\r\n  var ctxPath = \"${applicationContext}\";\r\n  var form = new Vue({\r\n    el: '#app',\r\n    data: {\r\n      formData: {\r\n        id:'',\r\n      name: \"\",\r\n      age: \"\",\r\n      birthday: new Date().Format('yyyy-MM-dd'),\r\n      height: \"\",\r\n      remark: \"\",\r\n      city: \"\",\r\n      },\r\n      selectData:{\r\n          cityOption: [],\r\n      },\r\n      urls: {\r\n        add: ctxPath + \"/entityObjectController/add\",\r\n        edit: ctxPath + \"/entityObjectController/edit\",\r\n        form: ctxPath + \"/studentController/dataDetail\",\r\n      },\r\n      state: {\r\n        name: false,\r\n        age: false,\r\n        birthday: false,\r\n        height: false,\r\n        remark: false,\r\n        city: false,\r\n        disabledKeys:'name,age,birthday,height,remark,city,',\r\n      },\r\n      formId: '', // form的唯一标识\r\n      actions: {},\r\n      dialogTitle: '',\r\n      currentState: '',\r\n      dialogFormVisible: true,\r\n      transForm: null\r\n    },\r\n    created: function () {\r\n      $('body').addClass('sc-skin1');\r\n      this.actions = gobal.getActions(this.urls);\r\n      this.transForm  = new TransFormData(this);\r\n      var _this = this;\r\n      request.post(this, ctxPath + \"/base/dropDownController/dataDictCombobox\", {itemKey : \"00058\"}, function(data) {\r\n          _this.selectData.cityOption = data;\r\n      });\r\n    },\r\n    methods: {\r\n      onDateChange: function (val, obj, key) {\r\n        obj[key] = val;\r\n      },\r\n      onSubmit: function (formName) {\r\n        var _this = this;\r\n        this.$refs[formName].validate(function (valid) {\r\n          if (valid) {\r\n            _this.formSubmit();\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      formSubmit: function () {\r\n        if (this.currentState == 'add') {\r\n          this.formData.id = utils.getUuId();\r\n        }\r\n        request.post(this, this.urls[this.currentState], this.transForm.commit(this.currentState), function (data) { // {entityStr: this.transForm.commit(this.currentState, obj)\r\n          if (data.success) {\r\n            this.sendParentMessage({type: 'Func', fnName: 'getTableData', message: data}); // fnParam Fn的参数\r\n            this.onCancel();\r\n          } else {\r\n            this.sendParentMessage({message: data});\r\n          }\r\n        }.bind(this));\r\n      },\r\n      onCancel: function () {\r\n        this.dialogFormVisible = true;\r\n        this.$refs['formData'].resetFields();\r\n        this.sendParentMessage({type: 'closeForm', formId: this.formId});\r\n      },\r\n      formPopUp: function (state, rows) {\r\n        this.setFormState(state);\r\n        this.formData = utils.myAssign({}, this.formData, this.formDataInit);\r\n        if (state != \"add\") {\r\n          this.getFormData({id: rows.id});\r\n        }\r\n        this.actions.save.visible = (state == dictFormState.edit || state == dictFormState.add);\r\n      },\r\n      getFormData: function (objKey) {\r\n        var _this = this;\r\n        request.post(this, this.urls.form, objKey, function (data) {\r\n          utils.formDataCopy(_this.formData, data);\r\n        });\r\n      },\r\n      setFormState: function (mode) {\r\n        this.currentState = mode;\r\n        var disabledKeys = this.state.disabledKeys;\r\n        for (var i in this.state) {\r\n          if (i !== 'disabledKeys') {\r\n            if (disabledKeys.indexOf(i) !== -1) {\r\n              this.state[i] = (mode === 'read');\r\n            }\r\n          }\r\n        }\r\n        this.state = Object.assign({}, this.state);\r\n      },\r\n      sendParentMessage: function (vdata) {\r\n        window.parent.postMessage(JSON.stringify(vdata), '*');\r\n      }\r\n    }\r\n  })\r\n</script>\r\n</html>",
    "htmlSource": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <script type=\"text/javascript\">\r\n    var resourceList = '${userSessionResourceList!}';\r\n    var entityObject = {\r\n        entityId : '4028a5816482db4b016482e4429b0002',\r\n        entityObjId : 'student',\r\n        entitySubObjId : '',\r\n    }\r\n</script>\r\n<link href=\"${applicationContext}/static/iconfont/17.7.4/iconfont.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/1.0/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/skin1.css\" rel=\"stylesheet\">\r\n<script src=\"${applicationContext}/static/jQuery/1.11.3/jquery.min.js\"></script>\r\n<script src=\"${applicationContext}/static/easyUI/1.5.2/jquery.easyui.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/popper.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/dataTable.js\"></script>\r\n<script src=\"${applicationContext}/static/vue/2.3.0/index.js\"></script>\r\n<script src=\"${applicationContext}/static/vue-resource/1.3.3/vue-resource.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/index.js?v=1.1\"></script>\r\n<script src=\"${applicationContext}/static/scui/1.0/scui.min.js?v=step1\"></script>\r\n<script src=\"${applicationContext}/static/util/gobal.js\"></script>\r\n<script src=\"${applicationContext}/static/util/dataTranslate.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/filters.js\"></script>\r\n<script src=\"${applicationContext}/static/util/accessControl.js\"></script>\r\n<script src=\"${applicationContext}/jslib/util/curd.js\"></script></head>\r\n<style>\r\n  .form_iframe {\r\n    height: 100%;\r\n    width: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 999;\r\n  }\r\n</style>\r\n<title>学生</title>\r\n<body>\r\n<div id=\"table\" class=\"sc-theme is-standard sc-box-content-app\">\r\n  <sc-form-layout class=\"sc-box-content sc-box-conten-search\" v-if=\"queryShow\">\r\n      <sc-form-layout-row>\r\n          <sc-form-layout-col>\r\n              <el-form :model=\"queryConditions\">\r\n                  <sc-form-layout>\r\n                      <sc-form-layout-row>\r\n                          <sc-form-layout-col width=\"standard\">\r\n                              <sc-form-layout-col>\r\n                                  <el-button type=\"primary\" @click=\"onAdd\" v-cloak>{{actions.add.text}}</el-button>\r\n                              </sc-form-layout-col>\r\n                          </sc-form-layout-col>\r\n                            <sc-form-layout-col width=\"standard\">\r\n                                <el-form-item label=\"名称\">\r\n                        <el-input  v-model=\"queryConditions.name\"></el-input>\r\n                                </el-form-item>\r\n                            </sc-form-layout-col>\r\n                            <sc-form-layout-col width=\"standard\">\r\n                                <el-form-item label=\"生日\">\r\n                        <el-date-picker  v-model=\"queryConditions.birthday\" @change=\"onDateChange($event,queryConditions,'birthday')\"\r\n                                        type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n                                </el-form-item>\r\n                            </sc-form-layout-col>\r\n                            <sc-form-layout-col width=\"standard\">\r\n                                <el-form-item label=\"城市\">\r\n                        <el-select clearable filterable v-model=\"queryConditions.city\"  placeholder=\"请选择\">\r\n                            <el-option\r\n                                    v-for=\"item in selectData.cityOption\"\r\n                                    :key=\"item.ddKey\"\r\n                                    :label=\"item.ddName\"\r\n                                    :value=\"item.ddKey\">\r\n                            </el-option>\r\n                        </el-select>\r\n                                </el-form-item>\r\n                            </sc-form-layout-col>\r\n                          <sc-form-layout-col align=\"right\" class=\"sc-button-resetQuery\">\r\n                              <el-form-item>\r\n                                  <el-button type=\"primary\" @click=\"onQuery\" v-cloak>{{actions.query.text}}</el-button>\r\n                                  <el-button @click=\"onReset\" v-cloak>{{actions.reset.text}}</el-button>\r\n                              </el-form-item>\r\n                          </sc-form-layout-col>\r\n                      </sc-form-layout-row>\r\n                  </sc-form-layout>\r\n              </el-form>\r\n          </sc-form-layout-col>\r\n      </sc-form-layout-row>\r\n  </sc-form-layout>\r\n\r\n  <!-- table -->\r\n  <div>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" highlight-current-row fit border stripe style=\"width:100%\"\r\n              :height=\"tableHeight\">\r\n      <el-table-column v-for=\"col in column\" :label=\"col.label\" :prop=\"col.prop\" header-align=\"center\"\r\n                       :min-width=\"col.minWidth || 120\" :formatter=\"formatter\" :align=\"col.align\"></el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"操作\" show-overflow-tooltip min-width=\"120\" align=\"center\">\r\n        <template scope=\"scope\">\r\n          <el-tooltip class=\"item\" effect=\"light\" enterable :content=\"actions.read.text\"\r\n                      placement=\"left\">\r\n            <el-button @click.native.prevent=\"onReadRow(scope.row)\" type=\"text\" size=\"small\">\r\n              <i :class=\"actions.read.icon\"></i>\r\n            </el-button>\r\n          </el-tooltip>\r\n\r\n          <el-tooltip class=\"item\" effect=\"light\" enterable :content=\"actions.edit.text\"\r\n                      placement=\"left\">\r\n            <el-button @click.native.prevent=\"onEditRow(scope.row)\" type=\"text\" size=\"small\">\r\n              <i :class=\"actions.edit.icon\"></i>\r\n            </el-button>\r\n          </el-tooltip>\r\n          <el-tooltip class=\"item\" effect=\"light\" enterable :content=\"actions.del.text\"\r\n                      placement=\"left\">\r\n            <el-button @click.native.prevent=\"onDeleteRow(scope.row)\" type=\"text\" size=\"small\">\r\n              <i :class=\"actions.del.icon\"></i>\r\n            </el-button>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination class=\"sc-box-content sc-box-content-page\" @size-change=\"onHandleSizeChange\"\r\n                   @current-change=\"onHandleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"pageSizes\"\r\n                   :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                   :total=\"totalPage\"></el-pagination>\r\n  </div>\r\n\r\n  <!--<div v-html=\"formDiaHtml\"></div>-->\r\n\r\n  <transition name=\"el-fade-in\" v-for=\"item in iframeParams\">\r\n      <iframe :src=\"item.url\" :ref=\"item.ref\" class=\"form_iframe\" v-show=\"item.iframeShow\" frameborder=\"0\"></iframe>\r\n  </transition>\r\n</div>\r\n</body>\r\n<script>\r\n  var ctxPath = \"${applicationContext}\";\r\n  new Vue({\r\n    el: '#table',\r\n    data: {\r\n      queryConditions: {\r\n      name: \"\",\r\n      birthday: new Date().Format('yyyy-MM-dd'),\r\n      city: \"\",\r\n      },\r\n      column: [\r\n        {\r\n            label: '名称',\r\n            prop: 'name',\r\n          align: 'left',\r\n        },\r\n        {\r\n            label: '年龄',\r\n            prop: 'age',\r\n          align: 'right',\r\n        },\r\n        {\r\n            label: '生日',\r\n            prop: 'birthday',\r\n          align: 'center',\r\n        },\r\n        {\r\n            label: '身高',\r\n            prop: 'height',\r\n          align: 'right',\r\n        },\r\n        {\r\n            label: '备注',\r\n            prop: 'remark',\r\n          align: 'left',\r\n        },\r\n        {\r\n            label: '城市',\r\n            prop: 'city',\r\n          align: 'left',\r\n        },\r\n      ],\r\n      selectData:{\r\n          cityOption: [],\r\n      },\r\n      queryShow: true,\r\n      iframeShow: false,\r\n      loading: false,\r\n      tableData: [],\r\n      tableHeight: '',\r\n      currentPage: 1,\r\n      pageSize: 0,\r\n      pageSizes: [],\r\n      totalPage: 0,\r\n      urls: {\r\n        del: ctxPath + \"/entityObjectController/delete\",\r\n        table: ctxPath + \"/studentController/dataGrid\"\r\n      },\r\n      formats: {//需格式化数据\r\n      birthday: {format: \"yyyy-MM-dd\" },\r\n      },\r\n      // id和ref当做iframe的唯一标识，在多个弹窗的时候，能关闭对应的form\r\n      iframeParams: [\r\n        { iframeShow: false, url: ctxPath + '/entityObjectController/form?objId='+entityObject.entityObjId, id: 'form', ref: 'formRef', type: '' }\r\n      ],\r\n      transForm: '',\r\n      formSrc: '',\r\n      formDiaHtml: '',\r\n      actions: {},\r\n      dialogTitle: '',\r\n      dialogFormVisible: false,\r\n      fuzzyQueryConditions: {},\r\n      currentState: ''\r\n    },\r\n    created: function () {\r\n      $('body').addClass('sc-skin1');\r\n      selectUtil.selectInit(this);\r\n      this.getTableData();\r\n      var _this = this;\r\n      this.transForm  = new TransFormData(this);\r\n      request.post(this, ctxPath + \"/base/dropDownController/dataDictCombobox\", {itemKey : \"00058\"}, function(data) {\r\n          _this.selectData.cityOption = data;\r\n      });\r\n    },\r\n    mounted: function () {\r\n      this.actions = gobal.getActions(this.urls);\r\n      gobal.getTableHeight(this);\r\n      var _this = this;\r\n      window.onmessage = (function(message) {\r\n        var vdata = JSON.parse(message.data);\r\n        if (vdata.type === 'Func') {\r\n          this[vdata.fnName](vdata.fnParam || '');\r\n        }\r\n        if (vdata.message) {\r\n          gobal.messageShow(this, vdata.message);\r\n        }\r\n        if (vdata.type === 'closeForm') {\r\n          this.iframeParams.forEach(function(item) {\r\n            if (item.id == vdata.formId) {\r\n              _this.$set(item, 'iframeShow', false);\r\n            }\r\n          });\r\n        }\r\n      }.bind(this));\r\n    },\r\n    methods: {\r\n      onAdd: function() {\r\n        this.currentState = 'add'; //\r\n        this.showForm('form');\r\n      },\r\n      showForm: function(formId, callback) {\r\n        var ref = '';\r\n        for (var i = 0; i < this.iframeParams.length; i++) {\r\n          if (this.iframeParams[i].id == formId) {\r\n            this.iframeParams[i].iframeShow = true;\r\n            ref = this.iframeParams[i].ref;\r\n            break;\r\n          }\r\n        }\r\n        this.$nextTick(function() {\r\n          if (this.$refs[ref][0].contentWindow.form) {\r\n            this.$refs[ref][0].contentWindow.form.currentState = this.currentState;\r\n            this.$refs[ref][0].contentWindow.form.formId = formId;\r\n          }\r\n          if (callback instanceof Function) {\r\n            callback(this.$refs[ref][0].contentWindow.form);\r\n          }\r\n        });\r\n      },\r\n      onQuery: function() {\r\n        selectUtil.onQuery(this);\r\n        this.getTableData();\r\n      },\r\n      onReset: function() {\r\n        selectUtil.onReset(this);\r\n      },\r\n      onDateChange: function (val, obj, key) {\r\n        obj[key] = val;\r\n      },\r\n      onHandleSizeChange: function (val) {\r\n        selectUtil.onHandleSizeChange(this, val);\r\n      },\r\n      onHandleCurrentChange: function (val) {\r\n        selectUtil.onHandleCurrentChange(this, val);\r\n      },\r\n      getTableData: function (params) {\r\n        if (!params) params = this.queryConditions;\r\n        var vParams = {\r\n          page: '',\r\n          rows: '',\r\n          entityStr: ''\r\n        };\r\n        vParams.page = params.page;\r\n        vParams.rows = params.rows;\r\n        var copyParams = JSON.parse(JSON.stringify(params));\r\n        delete copyParams.page;\r\n        delete copyParams.rows;\r\n        vParams.entityStr = JSON.stringify(copyParams);\r\n        request.post(this, this.urls.table, vParams, function (response) {\r\n          this.tableData = response.rows;\r\n          this.totalPage = response.total;\r\n        }.bind(this));\r\n      },\r\n      onCancel: function () {\r\n        this.dialogFormVisible = false;\r\n        this.$refs['form'].resetFields();\r\n      },\r\n      onReadRow : function(rows) {\r\n        this.currentState = 'read';\r\n        this.showForm('form', function(formExample) {\r\n          formExample.formPopUp(dictFormState.read, rows);\r\n        }.bind(this));\r\n      },\r\n      onEditRow: function (rows) {\r\n        this.currentState = 'edit';\r\n        this.showForm('form', function(formExample) {\r\n          formExample.formPopUp(dictFormState.edit, rows);\r\n        }.bind(this))\r\n      },\r\n      onDeleteRow: function (rows) {\r\n        var _this = this;\r\n        var obj = gobal.getComfirmInfo(dictFormState.del);\r\n        gobal.openComfirm(this, obj, function () {\r\n          request.post(_this, _this.urls.del, _this.transForm.commit('del', { id: rows.id }), function (data) {\r\n            gobal.messageShow(_this, data);\r\n            _this.getTableData();\r\n          });\r\n        });\r\n      },\r\n      formatter: function (row, column) {//格式化数据方法\r\n        return gobal.formatter(row, column.property, this.formats);\r\n      },\r\n    },\r\n    update: function () {\r\n      gobal.getTableHeight(this)\r\n    }\r\n  })\r\n</script>\r\n</html>",
    "id": "4028a5816482db4b016482e4429b0002",
    "isDeploy": "",
    "lastUpdateDate": "2018-11-02 16:59:56",
    "lastUpdatedBy": "cdc",
    "mappingTable": "T_STUDENT",
    "name": "学生",
    "objId": "student",
    "orgId": "",
    "parent": null,
    "parentId": "",
    "positionX": 399,
    "positionY": 132,
    "primaryKey": "id",
    "status": "",
    "version": "V3.5",
    "tableId": "4028a5816482db4b016482e4429b0002"
  },
  {
    "appId": "",
    "attributes": [
      {
        "businessKey": false,
        "code": "id",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-09-04 09:53:28",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "ID",
        "expression": "",
        "formEdit": false,
        "hidden": false,
        "id": "0c8beae66b60364b3568248640a80dca4a66",
        "lastUpdateDate": "2018-11-02 17:09:08",
        "lastUpdatedBy": "admin",
        "length": 50,
        "mappingField": "ID",
        "name": "ID",
        "nullAble": false,
        "objId": "TS_CUSTODIAN_ORG",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": true,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "CREATE_OPERATOR",
        "type": "SELF",
        "validationRules": [
          {
            "attributeId": "0c8beae66b60364b3568248640a80dca4a66",
            "createdBy": "admin",
            "creationDate": "2018-11-02 17:09:08",
            "description": "",
            "entityId": "ca263fc83e1e40359b43c69e04f725ee",
            "expression": "aaaa",
            "id": "8261027b762d45e0962f302a86d6774d",
            "lastUpdateDate": "2018-11-02 17:09:08",
            "lastUpdatedBy": "admin",
            "objId": "TS_CUSTODIAN_ORG",
            "order": 0,
            "status": "",
            "type": "NOTNULL"
          }
        ],
        "precisionDisabled": true,
        "lengthDisabled": false,
        "nullAbleDisabled": true
      },
      {
        "businessKey": false,
        "code": "CUST_ORG_NAME",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-09-04 09:53:28",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "托管机构名称",
        "expression": "",
        "formEdit": true,
        "hidden": true,
        "id": "ccce779b73692742df78796731a871d0f4dd",
        "lastUpdateDate": "2018-11-02 17:09:08",
        "lastUpdatedBy": "admin",
        "length": 50,
        "mappingField": "CUST_ORG_NAME",
        "name": "托管机构名称",
        "nullAble": true,
        "objId": "TS_CUSTODIAN_ORG",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": true,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "CREATE_OPERATOR",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "PAY_CHANNEL",
        "controlType": "COMBO",
        "createdBy": "admin",
        "creationDate": "2018-09-04 09:53:28",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "直连通道",
        "expression": "00043",
        "formEdit": true,
        "hidden": true,
        "id": "7868ce3d4157644e9c480314624c94f3e181",
        "lastUpdateDate": "2018-11-02 17:09:08",
        "lastUpdatedBy": "admin",
        "length": 36,
        "mappingField": "PAY_CHANNEL",
        "name": "直连通道",
        "nullAble": true,
        "objId": "TS_CUSTODIAN_ORG",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": true,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "CREATE_OPERATOR",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "PAY_CHANNEL",
        "controlType": "COMBO",
        "createdBy": "admin",
        "creationDate": "2018-09-04 09:53:28",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "直连通道",
        "expression": "00043",
        "formEdit": true,
        "hidden": true,
        "id": "48c8e304319dd34a0d398c53b9afd1664bef",
        "lastUpdateDate": "2018-11-02 17:09:08",
        "lastUpdatedBy": "admin",
        "length": 36,
        "mappingField": "PAY_CHANNEL",
        "name": "直连通道",
        "nullAble": true,
        "objId": "TS_CUSTODIAN_ORG",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": true,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "CREATE_OPERATOR",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "OPERATOR",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-09-04 09:53:28",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "操作人",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "5f841e3e8de4784df4894f082460d8827020",
        "lastUpdateDate": "2018-11-02 17:09:08",
        "lastUpdatedBy": "admin",
        "length": 100,
        "mappingField": "OPERATOR",
        "name": "操作人",
        "nullAble": true,
        "objId": "TS_CUSTODIAN_ORG",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "LAST_UPDATE_OPERATOR",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "OPERATION_TIME",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-09-04 09:53:28",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "DATE",
        "defaultValue": null,
        "description": "操作时间",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "be8453cab1693b4571b95afbe0abb3b15078",
        "lastUpdateDate": "2018-11-02 17:09:08",
        "lastUpdatedBy": "admin",
        "length": null,
        "mappingField": "OPERATION_TIME",
        "name": "操作时间",
        "nullAble": true,
        "objId": "TS_CUSTODIAN_ORG",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "LAST_UPDATE_DATE",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": true
      }
    ],
    "businessKey": "",
    "code": "TS_CUSTODIAN_ORG",
    "createdBy": "admin",
    "creationDate": "2018-09-04 09:53:28",
    "deploy": false,
    "description": "托管机构管理",
    "editFormSource": null,
    "editHtmlSource": null,
    "formSource": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n<script type=\"text/javascript\">\r\n    var resourceList = '${userSessionResourceList!}';\r\n    var entityObject = {\r\n        entityId : 'ca263fc83e1e40359b43c69e04f725ee',\r\n        entityObjId : 'TS_CUSTODIAN_ORG',\r\n        entitySubObjId : '',\r\n    }\r\n</script>\r\n<link href=\"${applicationContext}/static/iconfont/17.7.4/iconfont.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/1.0/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/skin1.css\" rel=\"stylesheet\">\r\n<script src=\"${applicationContext}/static/jQuery/1.11.3/jquery.min.js\"></script>\r\n<script src=\"${applicationContext}/static/easyUI/1.5.2/jquery.easyui.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/popper.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/dataTable.js\"></script>\r\n<script src=\"${applicationContext}/static/vue/2.3.0/index.js\"></script>\r\n<script src=\"${applicationContext}/static/vue-resource/1.3.3/vue-resource.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/index.js?v=1.1\"></script>\r\n<script src=\"${applicationContext}/static/scui/1.0/scui.min.js?v=step1\"></script>\r\n<script src=\"${applicationContext}/static/util/gobal.js\"></script>\r\n<script src=\"${applicationContext}/static/util/dataTranslate.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/filters.js\"></script>\r\n<script src=\"${applicationContext}/static/util/accessControl.js\"></script>\r\n<script src=\"${applicationContext}/jslib/util/curd.js\"></script>  <style>\r\n    body {\r\n      background-color: transparent;\r\n    }\r\n  </style>\r\n</head>\r\n<title>托管机构管理-form</title>\r\n<body>\r\n<div id=\"app\" class=\"sc-theme is-standard sc-box-content-app\">\r\n  <div>\r\n    <el-dialog :title=\"dialogTitle\" v-model=\"dialogFormVisible\" @close=\"onCancel\" :close-on-click-modal=\"false\"\r\n               size=\"small\">\r\n      <div class=\"dialog_content\">\r\n        <el-form :model=\"formData\" ref=\"formData\">\r\n          <sc-form-layout label-width=\"small\">\r\n                <sc-form-layout-row>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"托管机构名称\" prop=\"CUST_ORG_NAME\"  >\r\n                        <el-input :disabled=\"state.CUST_ORG_NAME\" v-model=\"formData.CUST_ORG_NAME\"></el-input>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"指令称谓\" prop=\"CUST_INS_NAME\"  >\r\n                        <el-input :disabled=\"state.CUST_INS_NAME\" v-model=\"formData.CUST_INS_NAME\"></el-input>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                </sc-form-layout-row>\r\n                <sc-form-layout-row>\r\n                  <sc-form-layout-col>\r\n                      <el-form-item label=\"直连通道\" prop=\"PAY_CHANNEL\"  >\r\n                        <el-select clearable filterable v-model=\"formData.PAY_CHANNEL\" :disabled=\"state.PAY_CHANNEL\" placeholder=\"请选择\">\r\n                            <el-option\r\n                                    v-for=\"item in selectData.PAY_CHANNELOption\"\r\n                                    :key=\"item.ddKey\"\r\n                                    :label=\"item.ddName\"\r\n                                    :value=\"item.ddKey\">\r\n                            </el-option>\r\n                        </el-select>\r\n                      </el-form-item>\r\n                  </sc-form-layout-col>\r\n                </sc-form-layout-row>\r\n          </sc-form-layout>\r\n        </el-form>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" v-if=\"actions.save.visible\" @click=\"onSubmit('formData')\" v-cloak>\r\n          {{actions.save.text}}\r\n        </el-button>\r\n        <el-button @click=\"onCancel\" v-cloak>{{actions.cancel.text}}</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n\r\n</div>\r\n</body>\r\n<script>\r\n  var ctxPath = \"${applicationContext}\";\r\n  var form = new Vue({\r\n    el: '#app',\r\n    data: {\r\n      formData: {\r\n        ID : '',\r\n       id: '',\r\n      CUST_ORG_NAME: \"\",\r\n      CUST_INS_NAME: \"\",\r\n      PAY_CHANNEL: \"\",\r\n      },\r\n      selectData:{\r\n          PAY_CHANNELOption: [],\r\n      },\r\n      urls: {\r\n        add: ctxPath + \"/entityObjectController/add\",\r\n        edit: ctxPath + \"/entityObjectController/edit\",\r\n        form: ctxPath + \"/entityObjectController/dataDetail\",\r\n      },\r\n      state: {\r\n        CUST_ORG_NAME: false,\r\n        CUST_INS_NAME: false,\r\n        PAY_CHANNEL: false,\r\n        disabledKeys:'CUST_ORG_NAME,CUST_INS_NAME,PAY_CHANNEL,',\r\n      },\r\n      formId: '', // form的唯一标识\r\n      actions: {},\r\n      dialogTitle: '',\r\n      currentState: '',\r\n      dialogFormVisible: true,\r\n      transForm: null\r\n    },\r\n    created: function () {\r\n      $('body').addClass('sc-skin1');\r\n      this.actions = gobal.getActions(this.urls);\r\n      this.transForm  = new TransFormData(this);\r\n      var _this = this;\r\n      request.post(this, ctxPath + \"/base/dropDownController/dataDictCombobox\", {itemKey : \"00043\"}, function(data) {\r\n          _this.selectData.PAY_CHANNELOption = data;\r\n      });\r\n    },\r\n    methods: {\r\n      onDateChange: function (val, obj, key) {\r\n        obj[key] = val;\r\n      },\r\n      onSubmit: function (formName) {\r\n        var _this = this;\r\n        this.$refs[formName].validate(function (valid) {\r\n          if (valid) {\r\n            _this.formSubmit();\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      formSubmit: function () {\r\n        if (this.currentState == 'add') {\r\n          this.formData.id = utils.getUuId();\r\n        }\r\n        request.post(this, this.urls[this.currentState], this.transForm.commit(this.currentState), function (data) { // {entityStr: this.transForm.commit(this.currentState, obj)\r\n          if (data.success) {\r\n            this.sendParentMessage({type: 'Func', fnName: 'getTableData', message: data}); // fnParam Fn的参数\r\n            this.onCancel();\r\n          } else {\r\n            this.sendParentMessage({message: data});\r\n          }\r\n        }.bind(this));\r\n      },\r\n      onCancel: function () {\r\n        this.dialogFormVisible = true;\r\n        this.$refs['formData'].resetFields();\r\n        this.sendParentMessage({type: 'closeForm', formId: this.formId});\r\n      },\r\n      formPopUp: function (state, rows) {\r\n        this.setFormState(state);\r\n        this.formData = utils.myAssign({}, this.formData, this.formDataInit);\r\n        if (state != \"add\") {\r\n          var params = {objId:entityObject.entityObjId,entityStr:JSON.stringify({id: rows.ID})}\r\n          this.getFormData(params);\r\n        }\r\n        this.actions.save.visible = (state == dictFormState.edit || state == dictFormState.add);\r\n      },\r\n      getFormData: function (objKey) {\r\n        var _this = this;\r\n        request.post(this, this.urls.form, objKey, function (data) {\r\n          utils.formDataCopy(_this.formData, data);\r\n        });\r\n      },\r\n      setFormState: function (mode) {\r\n        this.currentState = mode;\r\n        var disabledKeys = this.state.disabledKeys;\r\n        for (var i in this.state) {\r\n          if (i !== 'disabledKeys') {\r\n            if (disabledKeys.indexOf(i) !== -1) {\r\n              this.state[i] = (mode === 'read');\r\n            }\r\n          }\r\n        }\r\n        this.state = Object.assign({}, this.state);\r\n      },\r\n      sendParentMessage: function (vdata) {\r\n        window.parent.postMessage(JSON.stringify(vdata), '*');\r\n      }\r\n    }\r\n  })\r\n</script>\r\n</html>",
    "htmlSource": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n<script type=\"text/javascript\">\r\n    var resourceList = '${userSessionResourceList!}';\r\n    var entityObject = {\r\n        entityId : 'ca263fc83e1e40359b43c69e04f725ee',\r\n        entityObjId : 'TS_CUSTODIAN_ORG',\r\n        entitySubObjId : '',\r\n    }\r\n</script>\r\n<link href=\"${applicationContext}/static/iconfont/17.7.4/iconfont.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/1.0/index.css\" rel=\"stylesheet\">\r\n<link href=\"${applicationContext}/static/scui/2.0.1/skin1.css\" rel=\"stylesheet\">\r\n<script src=\"${applicationContext}/static/jQuery/1.11.3/jquery.min.js\"></script>\r\n<script src=\"${applicationContext}/static/easyUI/1.5.2/jquery.easyui.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/popper.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/dataTable.js\"></script>\r\n<script src=\"${applicationContext}/static/vue/2.3.0/index.js\"></script>\r\n<script src=\"${applicationContext}/static/vue-resource/1.3.3/vue-resource.min.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/index.js?v=1.1\"></script>\r\n<script src=\"${applicationContext}/static/scui/1.0/scui.min.js?v=step1\"></script>\r\n<script src=\"${applicationContext}/static/util/gobal.js\"></script>\r\n<script src=\"${applicationContext}/static/util/dataTranslate.js\"></script>\r\n<script src=\"${applicationContext}/static/scui/2.0.1/filters.js\"></script>\r\n<script src=\"${applicationContext}/static/util/accessControl.js\"></script>\r\n<script src=\"${applicationContext}/jslib/util/curd.js\"></script></head>\r\n<style>\r\n  .form_iframe {\r\n    height: 100%;\r\n    width: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 999;\r\n  }\r\n</style>\r\n<title>托管机构管理</title>\r\n<body>\r\n<div id=\"table\" class=\"sc-theme is-standard sc-box-content-app\">\r\n  <sc-form-layout class=\"sc-box-content sc-box-conten-search\" v-if=\"queryShow\">\r\n      <sc-form-layout-row>\r\n          <sc-form-layout-col>\r\n              <el-form :model=\"queryConditions\">\r\n                  <sc-form-layout>\r\n                      <sc-form-layout-row>\r\n                          <sc-form-layout-col width=\"standard\">\r\n                              <sc-form-layout-col>\r\n                                  <el-button type=\"primary\" @click=\"onAdd\" v-cloak>{{actions.add.text}}</el-button>\r\n                              </sc-form-layout-col>\r\n                          </sc-form-layout-col>\r\n                            <sc-form-layout-col width=\"standard\">\r\n                                <el-form-item label=\"托管机构名称\">\r\n                        <el-input  v-model=\"queryConditions.CUST_ORG_NAME\"></el-input>\r\n                                </el-form-item>\r\n                            </sc-form-layout-col>\r\n                            <sc-form-layout-col width=\"standard\">\r\n                                <el-form-item label=\"指令称谓\">\r\n                        <el-input  v-model=\"queryConditions.CUST_INS_NAME\"></el-input>\r\n                                </el-form-item>\r\n                            </sc-form-layout-col>\r\n                            <sc-form-layout-col width=\"standard\">\r\n                                <el-form-item label=\"直连通道\">\r\n                        <el-select clearable filterable v-model=\"queryConditions.PAY_CHANNEL\"  placeholder=\"请选择\">\r\n                            <el-option\r\n                                    v-for=\"item in selectData.PAY_CHANNELOption\"\r\n                                    :key=\"item.ddKey\"\r\n                                    :label=\"item.ddName\"\r\n                                    :value=\"item.ddKey\">\r\n                            </el-option>\r\n                        </el-select>\r\n                                </el-form-item>\r\n                            </sc-form-layout-col>\r\n                          <sc-form-layout-col align=\"right\" class=\"sc-button-resetQuery\">\r\n                              <el-form-item>\r\n                                  <el-button type=\"primary\" @click=\"onQuery\" v-cloak>{{actions.query.text}}</el-button>\r\n                                  <el-button @click=\"onReset\" v-cloak>{{actions.reset.text}}</el-button>\r\n                              </el-form-item>\r\n                          </sc-form-layout-col>\r\n                      </sc-form-layout-row>\r\n                  </sc-form-layout>\r\n              </el-form>\r\n          </sc-form-layout-col>\r\n      </sc-form-layout-row>\r\n  </sc-form-layout>\r\n\r\n  <!-- table -->\r\n  <div>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" highlight-current-row fit border stripe style=\"width:100%\"\r\n              :height=\"tableHeight\">\r\n      <el-table-column v-for=\"col in column\" :label=\"col.label\" :prop=\"col.prop\" header-align=\"center\"\r\n                       :min-width=\"col.minWidth || 120\" :formatter=\"formatter\" :align=\"col.align\"></el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"操作\" show-overflow-tooltip min-width=\"120\" align=\"center\">\r\n        <template scope=\"scope\">\r\n          <el-tooltip class=\"item\" effect=\"light\" enterable :content=\"actions.read.text\"\r\n                      placement=\"left\">\r\n            <el-button @click.native.prevent=\"onReadRow(scope.row)\" type=\"text\" size=\"small\">\r\n              <i :class=\"actions.read.icon\"></i>\r\n            </el-button>\r\n          </el-tooltip>\r\n\r\n          <el-tooltip class=\"item\" effect=\"light\" enterable :content=\"actions.edit.text\"\r\n                      placement=\"left\">\r\n            <el-button @click.native.prevent=\"onEditRow(scope.row)\" type=\"text\" size=\"small\">\r\n              <i :class=\"actions.edit.icon\"></i>\r\n            </el-button>\r\n          </el-tooltip>\r\n          <el-tooltip class=\"item\" effect=\"light\" enterable :content=\"actions.del.text\"\r\n                      placement=\"left\">\r\n            <el-button @click.native.prevent=\"onDeleteRow(scope.row)\" type=\"text\" size=\"small\">\r\n              <i :class=\"actions.del.icon\"></i>\r\n            </el-button>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination class=\"sc-box-content sc-box-content-page\" @size-change=\"onHandleSizeChange\"\r\n                   @current-change=\"onHandleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"pageSizes\"\r\n                   :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                   :total=\"totalPage\"></el-pagination>\r\n  </div>\r\n\r\n  <!--<div v-html=\"formDiaHtml\"></div>-->\r\n\r\n  <transition name=\"el-fade-in\" v-for=\"item in iframeParams\">\r\n      <iframe :src=\"item.url\" :ref=\"item.ref\" class=\"form_iframe\" v-show=\"item.iframeShow\" frameborder=\"0\"></iframe>\r\n  </transition>\r\n</div>\r\n</body>\r\n<script>\r\n  var ctxPath = \"${applicationContext}\";\r\n  new Vue({\r\n    el: '#table',\r\n    data: {\r\n      queryConditions: {\r\n      CUST_ORG_NAME: \"\",\r\n      CUST_INS_NAME: \"\",\r\n      PAY_CHANNEL: \"\",\r\n      },\r\n      column: [\r\n        {\r\n            label: '托管机构名称',\r\n            prop: 'CUST_ORG_NAME',\r\n          align: 'left',\r\n        },\r\n        {\r\n            label: '指令称谓',\r\n            prop: 'CUST_INS_NAME',\r\n          align: 'left',\r\n        },\r\n        {\r\n            label: '直连通道',\r\n            prop: 'PAY_CHANNEL',\r\n          align: 'left',\r\n        },\r\n        {\r\n            label: '操作人',\r\n            prop: 'OPERATOR',\r\n          align: 'left',\r\n        },\r\n        {\r\n            label: '操作时间',\r\n            prop: 'OPERATION_TIME',\r\n          align: 'center',\r\n        },\r\n      ],\r\n      selectData:{\r\n          PAY_CHANNELOption: [],\r\n      },\r\n      queryShow: true,\r\n      iframeShow: false,\r\n      loading: false,\r\n      tableData: [],\r\n      tableHeight: '',\r\n      currentPage: 1,\r\n      pageSize: 0,\r\n      pageSizes: [],\r\n      totalPage: 0,\r\n      urls: {\r\n        del: ctxPath + \"/entityObjectController/delete\",\r\n        table: ctxPath + \"/entityObjectController/dataGrid\"\r\n      },\r\n      formats: {//需格式化数据\r\n      },\r\n      // id和ref当做iframe的唯一标识，在多个弹窗的时候，能关闭对应的form\r\n      iframeParams: [\r\n        { iframeShow: false, url: ctxPath + '/entityObjectController/form?objId='+entityObject.entityObjId, id: 'form', ref: 'formRef', type: '' }\r\n      ],\r\n      transForm: '',\r\n      formSrc: '',\r\n      formDiaHtml: '',\r\n      actions: {},\r\n      dialogTitle: '',\r\n      dialogFormVisible: false,\r\n      fuzzyQueryConditions: {},\r\n      currentState: ''\r\n    },\r\n    created: function () {\r\n      $('body').addClass('sc-skin1');\r\n      selectUtil.selectInit(this);\r\n      this.getTableData();\r\n      var _this = this;\r\n      this.transForm  = new TransFormData(this);\r\n      request.post(this, ctxPath + \"/base/dropDownController/dataDictCombobox\", {itemKey : \"00043\"}, function(data) {\r\n          _this.selectData.PAY_CHANNELOption = data;\r\n      });\r\n    },\r\n    mounted: function () {\r\n      this.actions = gobal.getActions(this.urls);\r\n      gobal.getTableHeight(this);\r\n      var _this = this;\r\n      window.onmessage = (function(message) {\r\n        var vdata = JSON.parse(message.data);\r\n        if (vdata.type === 'Func') {\r\n          this[vdata.fnName](vdata.fnParam || '');\r\n        }\r\n        if (vdata.message) {\r\n          gobal.messageShow(this, vdata.message);\r\n        }\r\n        if (vdata.type === 'closeForm') {\r\n          this.iframeParams.forEach(function(item) {\r\n            if (item.id == vdata.formId) {\r\n              _this.$set(item, 'iframeShow', false);\r\n            }\r\n          });\r\n        }\r\n      }.bind(this));\r\n    },\r\n    methods: {\r\n      onAdd: function() {\r\n        this.currentState = 'add'; //\r\n        this.showForm('form');\r\n      },\r\n      showForm: function(formId, callback) {\r\n        var ref = '';\r\n        for (var i = 0; i < this.iframeParams.length; i++) {\r\n          if (this.iframeParams[i].id == formId) {\r\n            this.iframeParams[i].iframeShow = true;\r\n            ref = this.iframeParams[i].ref;\r\n            break;\r\n          }\r\n        }\r\n        this.$nextTick(function() {\r\n          if (this.$refs[ref][0].contentWindow.form) {\r\n            this.$refs[ref][0].contentWindow.form.currentState = this.currentState;\r\n            this.$refs[ref][0].contentWindow.form.formId = formId;\r\n          }\r\n          if (callback instanceof Function) {\r\n            callback(this.$refs[ref][0].contentWindow.form);\r\n          }\r\n        });\r\n      },\r\n      onQuery: function() {\r\n        selectUtil.onQuery(this);\r\n        this.getTableData();\r\n      },\r\n      onReset: function() {\r\n        selectUtil.onReset(this);\r\n      },\r\n      onDateChange: function (val, obj, key) {\r\n        obj[key] = val;\r\n      },\r\n      onHandleSizeChange: function (val) {\r\n        selectUtil.onHandleSizeChange(this, val);\r\n      },\r\n      onHandleCurrentChange: function (val) {\r\n        selectUtil.onHandleCurrentChange(this, val);\r\n      },\r\n      getTableData: function (params) {\r\n        if (!params) params = this.queryConditions;\r\n        var vParams = {\r\n          page: '',\r\n          rows: '',\r\n          entityStr: '',\r\n          objId: entityObject.entityObjId,\r\n        };\r\n        vParams.page = params.page;\r\n        vParams.rows = params.rows;\r\n        var copyParams = JSON.parse(JSON.stringify(params));\r\n        delete copyParams.page;\r\n        delete copyParams.rows;\r\n        vParams.entityStr = JSON.stringify(copyParams);\r\n        request.post(this, this.urls.table, vParams, function (response) {\r\n          this.tableData = response.rows;\r\n          this.totalPage = response.total;\r\n        }.bind(this));\r\n      },\r\n      onCancel: function () {\r\n        this.dialogFormVisible = false;\r\n        this.$refs['form'].resetFields();\r\n      },\r\n      onReadRow : function(rows) {\r\n        this.currentState = 'read';\r\n        this.showForm('form', function(formExample) {\r\n          formExample.formPopUp(dictFormState.read, rows);\r\n        }.bind(this));\r\n      },\r\n      onEditRow: function (rows) {\r\n        this.currentState = 'edit';\r\n        this.showForm('form', function(formExample) {\r\n          formExample.formPopUp(dictFormState.edit, rows);\r\n        }.bind(this))\r\n      },\r\n      onDeleteRow: function (rows) {\r\n        var _this = this;\r\n        var obj = gobal.getComfirmInfo(dictFormState.del);\r\n        gobal.openComfirm(this, obj, function () {\r\n          request.post(_this, _this.urls.del, _this.transForm.commit('del', { id: rows.ID }), function (data) {\r\n            gobal.messageShow(_this, data);\r\n            _this.getTableData();\r\n          });\r\n        });\r\n      },\r\n      formatter: function (row, column) {//格式化数据方法\r\n        return gobal.formatter(row, column.property, this.formats);\r\n      },\r\n    },\r\n    update: function () {\r\n      gobal.getTableHeight(this)\r\n    }\r\n  })\r\n</script>\r\n</html>",
    "id": "ca263fc83e1e40359b43c69e04f725ee",
    "isDeploy": "",
    "lastUpdateDate": "2018-11-02 17:09:08",
    "lastUpdatedBy": "admin",
    "mappingTable": "TS_CUSTODIAN_ORG",
    "name": "托管机构管理",
    "objId": "TS_CUSTODIAN_ORG",
    "orgId": "",
    "parent": null,
    "parentId": "",
    "positionX": 991,
    "positionY": 210,
    "primaryKey": "id",
    "status": "",
    "version": "V2.7",
    "tableId": "ca263fc83e1e40359b43c69e04f725ee"
  },
  {
    "appId": "",
    "attributes": [
      {
        "businessKey": false,
        "code": "id",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-07-18 14:05:21",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "ID",
        "expression": "",
        "formEdit": false,
        "hidden": false,
        "id": "4028a58164ab4a510164abfe37a10006",
        "lastUpdateDate": "2018-11-02 17:00:18",
        "lastUpdatedBy": "cdc",
        "length": 36,
        "mappingField": "ID",
        "name": "ID",
        "nullAble": false,
        "objId": "course",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": true,
        "queryField": false,
        "refAttributeId": "c3168e553b27934bf13bb5a374f20e340a1f",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": "CREATE_OPERATOR",
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false,
        "nullAbleDisabled": true
      },
      {
        "businessKey": false,
        "code": "name",
        "controlType": "TEXT",
        "createdBy": "admin",
        "creationDate": "2018-07-18 14:05:21",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "STRING",
        "defaultValue": null,
        "description": "名称",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a58164ab4a510164abfe37a10007",
        "lastUpdateDate": "2018-11-02 17:00:18",
        "lastUpdatedBy": "cdc",
        "length": 50,
        "mappingField": "NAME",
        "name": "名称",
        "nullAble": true,
        "objId": "course",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "code",
        "controlType": "COMBO",
        "createdBy": "admin",
        "creationDate": "2018-07-18 14:05:21",
        "dataFormat": "",
        "dataSource": "DATA_DICTIONARY",
        "dataType": "STRING",
        "defaultValue": null,
        "description": "编码",
        "expression": "00002",
        "formEdit": false,
        "hidden": true,
        "id": "4028a58164ab4a510164abfe37a10008",
        "lastUpdateDate": "2018-11-02 17:00:18",
        "lastUpdatedBy": "cdc",
        "length": 50,
        "mappingField": "CODE",
        "name": "编码",
        "nullAble": true,
        "objId": "course",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "grade",
        "controlType": "NUMBER",
        "createdBy": "admin",
        "creationDate": "2018-07-18 14:05:21",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "DOUBLE",
        "defaultValue": null,
        "description": "分数",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a58164ab4a510164abfe37a10009",
        "lastUpdateDate": "2018-11-02 17:00:18",
        "lastUpdatedBy": "cdc",
        "length": 19,
        "mappingField": "GRADE",
        "name": "分数",
        "nullAble": true,
        "objId": "course",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": 2,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": false,
        "lengthDisabled": false
      },
      {
        "businessKey": false,
        "code": "examDate",
        "controlType": "DATE",
        "createdBy": "admin",
        "creationDate": "2018-07-18 14:05:21",
        "dataFormat": "yyyy-MM-dd",
        "dataSource": null,
        "dataType": "DATE",
        "defaultValue": null,
        "description": "测试时间",
        "expression": "",
        "formEdit": false,
        "hidden": true,
        "id": "4028a58164ab4a510164abfe37a1000a",
        "lastUpdateDate": "2018-11-02 17:00:18",
        "lastUpdatedBy": "cdc",
        "length": null,
        "mappingField": "EXAM_DATE",
        "name": "测试时间",
        "nullAble": true,
        "objId": "course",
        "operator": "EQUALS",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": true
      },
      {
        "businessKey": false,
        "code": "parentId",
        "controlType": null,
        "createdBy": "admin",
        "creationDate": "2018-07-18 14:05:21",
        "dataFormat": "",
        "dataSource": null,
        "dataType": "STRING",
        "defaultValue": null,
        "description": "父节点",
        "expression": "",
        "formEdit": false,
        "hidden": false,
        "id": "4028a58164ab4a510164abfe37a1000b",
        "lastUpdateDate": "2018-11-02 17:00:18",
        "lastUpdatedBy": "cdc",
        "length": 36,
        "mappingField": "PARENT_ID",
        "name": "父节点",
        "nullAble": true,
        "objId": "course",
        "operator": "BETWEEN",
        "parent": null,
        "parentId": "",
        "precision": null,
        "primaryKey": false,
        "queryField": false,
        "refAttributeId": "",
        "refEntityId": "",
        "reference": null,
        "status": "",
        "systemFieldType": null,
        "type": "SELF",
        "validationRules": [],
        "precisionDisabled": true,
        "lengthDisabled": false
      }
    ],
    "businessKey": "",
    "code": "course",
    "createdBy": "admin",
    "creationDate": "2018-07-18 14:05:21",
    "deploy": false,
    "description": "",
    "editFormSource": null,
    "editHtmlSource": null,
    "formSource": null,
    "htmlSource": null,
    "id": "4028a58164ab4a510164abfe379f0005",
    "isDeploy": "",
    "lastUpdateDate": "2018-11-02 17:00:18",
    "lastUpdatedBy": "cdc",
    "mappingTable": "T_COURSE",
    "name": "课程",
    "objId": "course",
    "orgId": "",
    "parent": null,
    "parentId": "student",
    "positionX": 512,
    "positionY": 476,
    "primaryKey": "id",
    "status": "",
    "version": "V1.7",
    "tableId": "4028a58164ab4a510164abfe379f0005"
  }
]